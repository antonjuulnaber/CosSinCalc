head.ready(function(){$("#unzip_message").hide(),$("#unzip_mask").show();var s,e=$("#calculator"),r=$("input.number",e),c=($(".drawing img",e),$("#errors"));function l(){$("#result table.variables .variable").each(function(){var e=this.id.split("_");$(this).text(s[e[0]](e[1]))}),$("#area_result").text(s.area()),$("#circumference_result").text(s.circumference()),$("#calculation_notice").toggle(!!s.alternative);var e=s.formatEquations();$("#calculation_steps").html(e),MathJax.Hub.Queue(["Typeset",MathJax.Hub,"calculation_steps"]),setTimeout(function(){var e=$("#drawing").empty();new CosSinCalc.Triangle.Drawing(s,300,50).draw(e[0]),$("#result")[0].scrollIntoView()},0)}function t(e){switch(hlight=$("#initial_drawing .highlight")[0],hlight.style.opacity=1,e){case"angle_a":hlight.setAttribute("cx",21),hlight.setAttribute("cy",142);break;case"angle_b":hlight.setAttribute("cx",223),hlight.setAttribute("cy",22);break;case"angle_c":hlight.setAttribute("cx",320),hlight.setAttribute("cy",139);break;case"side_a":hlight.setAttribute("cx",277),hlight.setAttribute("cy",83);break;case"side_b":hlight.setAttribute("cx",179),hlight.setAttribute("cy",147);break;case"side_c":hlight.setAttribute("cx",129),hlight.setAttribute("cy",73)}}e.submit(function(){c.empty(),(s=new CosSinCalc.Triangle).angles.unit=$("input[name='angle_unit']:checked").val(),r.each(function(){var e=this.id.split("_");s[e[0]](e[1],this.value)});var t=s.calculate();if(t.isValid())l(),$("#result").show();else{for(var e=$(document.createElement("ul")),i=0,a=t.exceptions.length;i<a;i++)e.append("<li>"+t.exceptions[i]+"</li>");c.text("Noget gik galt:").append(e),r.each(function(){var e=this.id.split("_");0==t[e[0]+"s"][e[1]]&&$(this).addClass("error")})}return!1}),$("#clear").click(function(){r.val("").removeClass("error"),c.empty()}),$("#initial_drawing .hover").mouseenter(function(){return $($(this).attr("href")).focus(),!1}),$("#initial_drawing .hover").click(function(){return $($(this).attr("href")).focus(),!1}),r.mouseenter(function(){r.removeClass("focus"),$(this).removeClass("error").addClass("focus").select(),t(this.id)}).focus(function(){r.removeClass("focus"),$(this).removeClass("error").addClass("focus").select(),t(this.id)}).blur(function(){$(this).removeClass("focus"),$("#initial_drawing .highlight")[0].style.opacity=0}),$("#increase_precision").click(function(){return s.decimals||$("#decrease_precision").removeClass("disabled"),s.decimals++,l(),!1}),$("#decrease_precision").click(function(){return s.decimals&&(s.decimals--,l(),s.decimals||$(this).addClass("disabled")),!1}),$("#show_alternative").click(function(){return(s=s.alternative).decimals=s.alternative.decimals,l(),!1})})