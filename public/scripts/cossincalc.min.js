/**
 * CosSinCalc version 6.0.7m
 * http://cossincalc.com/
 * 
 * Copyright (c) 2010-2012 Molte Emil Strange Andersen, released under the MIT license.
 */
 /**
 * This version has been modified to run with the offline project at https://github.com/antonjuulnaber/CosSinCalc-OFFLINE
 */
var CosSinCalc={VERSION:"6.0.7m",Triangle:function(){this.calculate=function(e){var n,t=new CosSinCalc.Triangle.Validator(this),i=new CosSinCalc.Triangle.Calculator(this);if(!e){if(!(n=t.validate()).isValid())return n;this.sides.amount=n.sides.amount,i.calculateVariables()}return(n=t.validateCalculation(i)).isValid()&&i.calculateAdditionalVariables(),n},this.resetVariables=function(){this.altitudes={a:null,b:null,c:null},this.medians={a:null,b:null,c:null},this.sides={a:null,b:null,c:null,unit:"degree",amount:0},this.angles={a:null,b:null,c:null,unit:null,bisectors:{a:null,b:null,c:null}},this.alternative=null,this.decimals=2,this.steps=[]},this.each=function(){for(var e=arguments[arguments.length-1],n=1<arguments.length?arguments[0]:CosSinCalc.Triangle.VARIABLES,t=0,i=n.length;t<i;t++)if(0==e(n[t],this.rest(t)))return!1},this.rest=function(e){var n=CosSinCalc.Triangle.VARIABLES.concat();return n.splice(e,1),n},this.copyAsAlternative=function(){this.alternative=new CosSinCalc.Triangle,this.alternative.angles=this.cloneObject(this.angles),this.alternative.sides=this.cloneObject(this.sides),this.alternative.decimals=this.decimals,this.alternative.alternative=this},this.equation=function(e,n,t,i){for(var s,a,l=[n,t,i],r="",u="";0<e.length;)e=(s=e.match(/(\$|@)(\d)/))?(r+=a=e.slice(0,s.index),u+=a,v=l[1*s[2]-1],r+="@"==s[1]?v.toUpperCase():v,u+="@"==s[1]?this.formatAngle(this.angles[v],this.angles.unit,this.decimals,!0):this.side(v),e.slice(s.index+2)):(r+=e,u+=e,"");u=(u=u.split("="))[1]+"="+u[0],this.steps.push("&"+r+"="+u)},this.formatEquations=function(){return"\\begin{align*}"+this.steps.join("\\\\")+"\\end{align*}"},this.angle=function(e,n){return void 0===n?this.formatAngle(this.angles[e],this.angles.unit,this.decimals):this.angles[e]=this.parseAngle(n,this.angles.unit)},this.side=function(e,n){return void 0===n?this.format(this.sides[e],this.decimals):this.sides[e]=this.parse(n)},this.altitude=function(e){return this.format(this.altitudes[e],this.decimals)},this.median=function(e){return this.format(this.medians[e],this.decimals)},this.anglebisector=function(e){return this.format(this.angles.bisectors[e],this.decimals)},this.area=function(){return this.format(this.sides.a*this.sides.b*Math.sin(this.angles.c)/2,this.decimals)},this.circumference=function(){return this.format(this.sides.a+this.sides.b+this.sides.c,this.decimals)},this.resetVariables()}};CosSinCalc.Triangle.VARIABLES=["a","b","c"],CosSinCalc.Triangle.ERROR_MESSAGES={notEnoughVariables:"Beregneren skal bruge 3 værdier.",tooManyVariables:"Beregneren skal kun bruge 3 værdier.",noSides:"Beregneren skal kende mindst én sidelængde.",invalidSide:"Kun tal (over nul) kan bruges som sidelængde.",invalidAngle:"Kun tal (over nul) kan bruges som vinkler. Vinklen skal også være mindre end summen af alle vinkler i en trekant.",invalidTriangle:"De givne værdier kan ikke skabe en trekant."},CosSinCalc.Parser={parse:function(e){return 1*e===e?e:null==e||""==e?null:(1<(e=e.replace(/[^\d\.,]+/g,"").split(/[^\d]+/)).length&&e.push("."+e.pop()),1*e.join(""))},parseAngle:function(e,n){return this.convertAngle(this.parse(e),n)},degreesToRadians:function(e){return Math.PI*e/180},gonToRadians:function(e){return Math.PI*e/200},radiansToDegrees:function(e){return 180*e/Math.PI},radiansToGon:function(e){return 200*e/Math.PI},convertAngle:function(e,n,t){if(null==e)return null;switch(n){case"degree":return t?this.radiansToDegrees(e):this.degreesToRadians(e);case"gon":return t?this.radiansToGon(e):this.gonToRadians(e);default:return e}},round:function(e,n){var t=Math.pow(10,n);return Math.round(e*t)/t},format:function(e,n){if(e=this.round(e,n)+"",n){var t=e.indexOf(".");for(-1==t&&(t=(e+=".").length-1);e.length-t-1<n;)e+="0"}return e},formatAngle:function(e,n,t,i){switch(e=this.format(this.convertAngle(e,n,!0),t),n){case"degree":return e+(i?"^{\\circ}":"°");case"gon":return e+(i?"\\text{ gon}":" gon");default:return e+(i?"\\text{ rad}":" rad")}},cloneObject:function(e){var n={};for(key in e)n[key]=e[key];return n},isAcute:function(e){return e<Math.PI/2},isObtuse:function(e){return e>Math.PI/2}},CosSinCalc.Triangle.prototype=CosSinCalc.Parser,CosSinCalc.Triangle.Calculator=function(a){function n(){a.each(function(e,n){a.angles[e]||(a.angles[e]=t(e,n),a.equation("@1=\\cos^{-1}\\left(\\frac{$2^2+$3^2-$1^2}{2\\cdot $2\\cdot $3}\\right)",e,n[0],n[1]))})}function t(e,n){return Math.acos((i(a.sides[n[0]])+i(a.sides[n[1]])-i(a.sides[e]))/(2*a.sides[n[0]]*a.sides[n[1]]))}function l(){a.each(function(e,n){if(!a.angles[e])return a.angles[e]=Math.PI-a.angles[n[0]]-a.angles[n[1]],a.equation("@1="+a.formatAngle(Math.PI,a.angles.unit,a.decimals,!0)+"-@2-@3",e,n[0],n[1]),!1}),a.each(function(n,e){if(a.sides[n])return a.each(e,function(e){a.sides[e]||(a.sides[e]=Math.sin(a.angles[e])*a.sides[n]/Math.sin(a.angles[n]),a.equation("$2=\\frac{\\sin(@2)\\cdot $1}{\\sin(@1)}",n,e))}),!1})}function i(e){return e*e}this.calculateVariables=function(){switch(a.sides.amount){case 3:n();break;case 2:a.each(function(s,e){if(a.angles[s])return a.sides[s]?a.each(e,function(e){if(a.sides[e]){if(a.angles[e]=Math.asin(Math.sin(a.angles[s])*a.sides[e]/a.sides[s]),a.equation("@2=\\sin^{-1}\\left(\\frac{\\sin(@1)\\cdot $2}{$1}\\right)",s,e),t=s,i=e,a.isAcute(a.angles[t])&&a.sides[t]<a.sides[i]&&a.sides[t]>a.sides[i]*Math.sin(a.angles[t])){a.copyAsAlternative(),a.alternative.angles[e]=Math.PI-a.angles[e],a.alternative.equation("@2="+a.formatAngle(Math.PI,a.angles.unit,a.decimals,!0)+"-\\sin^{-1}\\left(\\frac{\\sin(@1)\\cdot $2}{$1}\\right)",s,e);var n=new CosSinCalc.Triangle.Calculator(a.alternative);n.calculateSideAndAngle(),a.alternative.calculate(!0)}return l(),!1}var t,i}):(a.sides[s]=Math.sqrt(i(a.sides[e[0]])+i(a.sides[e[1]])-2*a.sides[e[0]]*a.sides[e[1]]*Math.cos(a.angles[s])),a.equation("$1=\\sqrt{$2^2+$3^2-2\\cdot $2\\cdot $3\\cdot \\cos(@1)}",s,e[0],e[1]),n()),!1});break;case 1:l();break;default:return!1}return!0},this.calculateSideAndAngle=function(){l()},this.calculateAdditionalVariables=function(){a.each(function(e,n){a.altitudes[e]=Math.sin(a.angles[n[0]])*a.sides[n[1]]}),a.each(function(e,n){a.medians[e]=Math.sqrt((2*i(a.sides[n[0]])+2*i(a.sides[n[1]])-i(a.sides[e]))/4)}),a.each(function(e,n){a.angles.bisectors[e]=Math.sin(a.angles[n[0]])*a.sides[n[1]]/Math.sin(a.angles[n[1]]+a.angles[e]/2)})},this.calculateAngle=function(e,n){return t(e,n)}},CosSinCalc.Triangle.Validator=function(s){var a={sides:{a:null,b:null,c:null,amount:0},angles:{a:null,b:null,c:null,amount:0},exceptions:[],isValid:function(){return!this.exceptions.length},total:function(){return this.sides.amount+this.angles.amount}};function l(e){return!isNaN(e)&&isFinite(e)&&e&&0<e}function r(e){return l(e)&&e<Math.PI}function u(e){return a.exceptions[a.exceptions.length-1]!=e&&a.exceptions.push(e),a}this.validate=function(){return s.each(function(e){var n,t;null!=s.sides[e]&&(n=e,l(s.sides[n])?(a.sides.amount++,a.sides[n]=!0):(a.sides[n]=!1,u("Kun tal (over nul) kan bruges som sidelængde."))),null!=s.angles[e]&&(t=e,r(s.angles[t])?(a.angles.amount++,a.angles[t]=!0):(a.angles[t]=!1,u("Kun tal (over nul) kan bruges som vinkler. Vinklen skal også være mindre end summen af alle vinkler i en trekant.")))}),a.isValid()&&function(){if(a.total()<3)return u("Beregneren skal bruge 3 værdier.");if(3<a.total())return u("Beregneren skal kun bruge 3 værdier.");if(a.sides.amount<1)u("Beregneren skal kende mindst én sidelængde.")}(),a},this.validateCalculation=function(i){return 0==s.each(function(e,n){if(!l(s.sides[e]))return!1;if(!r(s.angles[e]))return!1;var t=i.calculateAngle(e,n);return!(t>s.angles[e]+.01||t<s.angles[e]-.01)&&void 0})&&u("De givne værdier kan ikke skabe en trekant."),a}},CosSinCalc.Triangle.Drawing=function(l,r,u){r||(r=500),u||(u=25);var c={},o=r;function d(e,n,t,i){var s=e.text(n,t,i).attr({"font-size":12,"font-family":"Verdana"}),a=s.getBBox();e.rect(a.x-4,a.y-2,a.width+8,a.height+4).attr({fill:"#fff","fill-opacity":.5,stroke:"none"}).insertBefore(s);return s}this.draw=function(e){var n,t,i,s;c.a=[0,0],c.c=[l.sides.b,0],c.b=[Math.sqrt(l.sides.c*l.sides.c-l.altitudes.b*l.altitudes.b),l.altitudes.b],l.isObtuse(l.angles.a)&&(c.b[0]*=-1,n=-1*c.b[0],l.each(function(e){c[e][0]+=n})),t=Math.max(c.c[0]-c.b[0],c.b[0],c.c[0]),i=c.b[1],s=r/Math.max(t,i),l.each(function(e){c[e][0]*=s,c[e][1]*=s}),o=c.b[1],l.each(function(e){c[e][1]=o-c[e][1]}),l.each(function(e){c[e][0]+=u,c[e][1]+=u});var a=Raphael(e,r+2*u,o+2*u);a.path("M "+c.a.join(" ")+" L "+c.b.join(" ")+" L "+c.c.join(" ")+" Z").attr({fill:"#dbeada",stroke:"#dbeada","stroke-width":1}),d(a,c.a[0],c.a[1]+10,"A = "+l.angle("a")),d(a,c.b[0],c.b[1]-10,"B = "+l.angle("b")),d(a,c.c[0],c.c[1]+10,"C = "+l.angle("c")),d(a,(c.c[0]-c.b[0])/2+c.b[0],(c.c[1]-c.b[1])/2+c.b[1],"a = "+l.side("a")).attr("fill","#333"),d(a,(c.c[0]-c.a[0])/2+c.a[0],c.a[1],"b = "+l.side("b")).attr("fill","#333"),d(a,(c.b[0]-c.a[0])/2+c.a[0],(c.c[1]-c.b[1])/2+c.b[1],"c = "+l.side("c")).attr("fill","#333")}}
